/*! A fix for the iOS orientationchange zoom bug.
  Script by @scottjehl, rebound by @wilto.
  MIT / GPLv2 License.
  */
function naturalSort(e,t){var n=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,r=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,u=e.toString().replace(r,"")||"",a=t.toString().replace(r,"")||"",f=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),l=a.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),c=parseInt(u.match(s))||f.length!=1&&u.match(i)&&Date.parse(u),h=parseInt(a.match(s))||c&&a.match(i)&&Date.parse(a)||null;if(h){if(c<h)return-1;if(c>h)return 1}for(var p=0,d=Math.max(f.length,l.length);p<d;p++){oFxNcL=!(f[p]||"").match(o)&&parseFloat(f[p])||f[p]||0,oFyNcL=!(l[p]||"").match(o)&&parseFloat(l[p])||l[p]||0;if(isNaN(oFxNcL)!==isNaN(oFyNcL))return isNaN(oFxNcL)?1:-1;typeof oFxNcL!=typeof oFyNcL&&(oFxNcL+="",oFyNcL+="");if(oFxNcL<oFyNcL)return-1;if(oFxNcL>oFyNcL)return 1}return 0}(function(e){function h(){r.setAttribute("content",o),u=!0}function p(){r.setAttribute("content",s),u=!1}function d(t){c=t.accelerationIncludingGravity,a=Math.abs(c.x),f=Math.abs(c.y),l=Math.abs(c.z),(!e.orientation||e.orientation===180)&&(a>7||(l>6&&f<8||l<8&&f>6)&&a>5)?u&&p():u||h()}var t=navigator.userAgent;if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(t)&&t.indexOf("AppleWebKit")>-1))return;var n=e.document;if(!n.querySelector)return;var r=n.querySelector("meta[name=viewport]"),i=r&&r.getAttribute("content"),s=i+",maximum-scale=1",o=i+",maximum-scale=10",u=!0,a,f,l,c;if(!r)return;e.addEventListener("orientationchange",h,!1),e.addEventListener("devicemotion",d,!1)})(this),function(e){"use strict";var t={};t.CookieChecker=function(){var t=e.cookie("allow-cookies"),n;t||(n=e("#cookies"),n.bind("click","a.confirm",function(t){t.preventDefault(),n.hide(),e.cookie("allow-cookies",!0,{expires:365,path:"/"})}),e("body").prepend(n.show()))},t.searchAsYouType=function(){var t,n,r,i,s,o=-1,u=[],a={16:null,27:function(){d(),t.blur()},37:null,38:function(e){m(),e.preventDefault(e)},39:null,40:function(e){v(),e.preventDefault()},9:function(e){e.shiftKey?m():v(),e.preventDefault()},13:function(e){e.preventDefault(),n.find("a.focused").trigger("click")}},f=function(o,u){t=e(o);if(t.size()==0)return;n=e('<div id="search-suggestions" class="suggestions" style="display:none;position:absolute;"></div>'),n.css({width:t.outerWidth()+"px"});var f=e("body");r=parseInt(f.css("paddingLeft"),10),i=parseInt(f.css("paddingTop"),10)+t.outerHeight(),s=e.extend({source:[],onShow:e.noop,onHide:e.noop},u||{}),typeof s.source=="function"&&(s.source=s.source.call(this)),t.bind("keydown.autocomplete",function(e){var t=a[e.keyCode.toString()];typeof t=="function"&&t.call(this,e)}).bind("keyup.autocomplete",function(e){if(typeof a[e.keyCode.toString()]!="undefined"){e.preventDefault();return}l(t.val())}).bind("focus.autocomplete",function(){e.trim(t.val())!==""&&p()}).bind("blur.autocomplete",function(){g(-1)}),e(window).bind("resize.autocomplete",y),n.appendTo("body")},l=function(t){var t=e.trim(t);t===""?(h([]),d()):t!==""&&(h(c(t)),n.is(":hidden")&&p())},c=function(t){var n=t.replace(/\s+/,"|"),r=new RegExp(n,"gi");return e.grep(s.source,function(e){return r.exec(e.name)!==null})},h=function(t){u=t,o=-1,u.length==0&&u.push(b());var r=["<ul>"];e.each(u,function(e,t){r.push('<li><a href="'+t.href+'">'+t.name+"</a></li>")}),r.push("</ul>"),n.html(r.join(""))},p=function(){y(),n.show(),e("#search").addClass("has-results"),e(document).bind("click.autocomplete",function(r){var i=n.get(0);r.target!==t.get(0)&&r.target!==i&&!e.contains(i,r.target)&&(d(),t.blur())}),s.onShow(t,n)},d=function(){n.hide(),e("#search").removeClass("has-results"),e(document).unbind("click.autocomplete"),s.onHide(t,n)},v=function(){var e=u.length;e>0&&o<e-1?g(o+1):o===e-1&&g(0)},m=function(){o!==-1?g(o-1):g(u.length-1)},g=function(e){n.find("li").removeClass("focused").filter(":nth-child("+(e+1)+")").addClass("focused"),o=e},y=function(){var e=t.offset();n.css({top:Math.round(e.top+i)+"px",left:Math.round(e.left+r)+"px"})},b=function(){return{name:"No matches found",id:null}};return f}(),t.NavigationToggler=function(t){var n=e(t),r=!1,i,s=function(e){var t=e.outerHeight(),n="#site-top-navigation { margin-top: -"+t+"px; }";return n+="#site-top-navigation.inactive { margin-top: -"+t+"px; }",n},o=function(){if(!r){f();return}var e=document.getElementById("navigation-styles");e.innerHTML=s(e)},u=function(e){e.preventDefault(),i.addClass("inactive").removeClass("active")},a=function(e){e.preventDefault(),i.css("visibility","visible"),i.addClass("active").removeClass("inactive")},f=function(){if(r)return;var t=e("#site-navigation");i=t.clone(),i.attr("id","site-top-navigation").css({visibility:"hidden"}),i.append('<a href="#" class="close"><span>St√§ng meny</span></a>'),i.find("a.close").bind("click",u),e("body").append(i);var n=document.createElement("style");n.id="navigation-styles",n.type="text/css",n.innerHTML=s(i),document.getElementsByTagName("head")[0].appendChild(n),r=!0};n.bind("click",a),e(document).bind("resize",function(){setTimeout(o,200)}),f()},t.focusAndCopy=function(t){var n=function(){var e=this;window.setTimeout(function(){e.select()},5)};e(t).bind("focus",n).bind("click",n)},t.voting=function(){e("div.voting").each(function(){var t=e(this),n=t.find("div.votable"),r=t.find("div.results");if(r.size()==0)return;r.hide(),n.append('<a href="#" class="show-results toggler">'+n.data("show-results-copy")+"</a>"),r.append('<a href="#" class="show-votable toggler">'+r.data("show-votable-copy")+"</a>"),t.delegate("button, a.show-results","click",function(e){console.log(e),e.preventDefault(),n.hide(),r.show()}),t.delegate("a.show-votable","click",function(e){e.preventDefault(),r.hide(),n.show()})})},t.placeholderFallback=function(){var t=function(t){var n=e(t),r=e.trim(n.val()),i=n.attr("placeholder");if(r!=="")return;n.addClass("placeholder").val(i)},n=function(t){var n=e(t),r=e.trim(n.val()),i=n.attr("placeholder");r===i&&n.val("").removeClass("placeholder")};e("input[placeholder], textarea[placeholder]").filter(function(){return e.trim(e(this).val())===""}).bind("focus.placeholder",function(){n(this)}).bind("blur.placeholder",function(){t(this)}).each(function(){t(this)})},t.columnsFallback=function(t,n){var r=e(t);if(r.size()===0)return;r.each(function(){var t=e(this),r=t.find("li"),i=r.size(),s=Math.ceil(i/n)-1,o=[],u=[];for(var a=0;a<n;a++)u.push(['<div class="column c'+n+'"><ul>']);var f=0,l=0;for(var a=0;a<i;a++)u[l].push(r[a].outerHTML),f!==s?f++:(f=0,l++);for(var a=0;a<n;a++)u[a].push("</ul></div>"),u[a]=u[a].join("");o.push('<div class="grid"><div class="container">'),o.push(u.join("")),o.push("</div></div>"),t.replaceWith(o.join(""))})},t.SideNavigationToggler=function(){var t=e("#secondary-navigation"),n=(t.data("limit")||3)-1,r=t.data("show-more-copy"),i=t.data("show-less-copy"),s=!1,o=function(){return t.find("li:gt("+n+"):not(.more)")},u=function(){o().show(),t.find("li.more a").text(i),s=!1},a=function(){o().hide(),t.find("li.more a").text(r),s=!0};t.find("ul.menu").append('<li class="leaf more"><a href="#site-navigation">'+r+"</a></li>"),t.delegate("li.more a","click",function(e){e.preventDefault(),s?u():a()}),a()},e(document).ready(function(){var n=e("html");n.hasClass("lte8")||t.NavigationToggler("#skip-to-navigation"),n.hasClass("lte9")&&(t.placeholderFallback(),t.columnsFallback("#topics ol.labeled-list ol",3)),t.CookieChecker(),t.SideNavigationToggler(),t.searchAsYouType("#topics-search",{source:function(){var t=e.map(e("#topics a"),function(t){return{name:e(t).text(),href:t.href}});return t.sort(function(e,t){return naturalSort(e.name,t.name)})},onShow:function(e){e.parent().addClass("active-suggestions")},onHide:function(e){e.parent().removeClass("active-suggestions")}}),e("section.tabbed").tabs(),e("#conversation-form").hide(),e("#go-to-form").bind("click",function(t){t.preventDefault();var n=e("#conversation-form");n.is(":visible")?e("#conversation-form").slideUp():e("#conversation-form").slideDown()}),t.focusAndCopy("input.share"),t.voting()})}(jQuery);