(function(e){"use strict";var t={};t.suggestion_instances=-1,t.CookieChecker=function(){var t=e.cookie("allow-cookies"),n;t||(n=e("#cookies"),n.bind("click","a.confirm",function(t){t.preventDefault(),n.hide(),e.cookie("allow-cookies",!0,{expires:365,path:"/"})}),e("body").prepend(n.show()))},t.searchAsYouType=function(){var n=function(n,r){var i=this;this.element=e(n);if(this.element.size()==0)return;!1 in t&&(t.suggestion_instances=-1),t.suggestion_instances+=1,this._id=t.suggestion_instances,this.focused=-1,this.current_suggestions=[],this.options=e.extend({limit:!1,source:[],onShow:e.noop,onHide:e.noop,onNoResults:i.hide,onSetup:e.noop,itemTemplate:function(e){return'<li><a href="'+e.href+'">'+e.name+"</a></li>"},sortFunction:this.defaultSortFunction,inlined:!1},r||{}),this.setup()};return n.prototype.defaultSortFunction=function(e,t){return e.name.search(this.query())>t.name.search(this.query())?1:-1},n.prototype.setup=function(){if(typeof this.options.source=="function"){var t=this;setTimeout(function(){t.options.source.call(t)},20)}else this.source=this.options.source;this.container=e('<div id="suggestions-'+this._id+'" class="suggestions" style="display:none;position:absolute;"></div>');if(!this.options.inlined){this.container.css({width:this.element.outerWidth()+"px"});var n=e("body");this.offsets={x:parseInt(n.css("paddingLeft"),10),y:parseInt(n.css("paddingTop"),10)+this.element.outerHeight()},n.append(this.container)}else this.offsets={x:0,y:0},this.element.parent("form").append(this.container);this.setupListeners(),this.options.onSetup.call(this)},n.prototype.setupListeners=function(){var t=this,n=function(e){return e+".autocomplete"+t._id};this.element.bind(n("keydown"),function(e){var n=t.movementKeys[e.keyCode.toString()];typeof n=="function"&&n.call(t,e)}),this.element.bind(n("keyup"),function(e){if(typeof t.movementKeys[e.keyCode.toString()]!="undefined"){e.preventDefault();return}t._query=null,t.search(t.query())}),this.element.bind(n("focus"),function(){t.query()!==""&&t.search(t.query())}),this.element.bind(n("blur"),function(){t.focusSuggestion(-1)}),this.options.inlined||e(window).bind(n("resize"),function(){t.position()})},n.prototype.query=function(){return this._query||(this._query=e.trim(this.element.val())),this._query},n.prototype.movementKeys={16:null,27:function(){this.hide(),this.element.blur()},37:null,38:function(e){this.focusPrevious(),e.preventDefault(e)},39:null,40:function(e){this.focusNext(),e.preventDefault()},9:function(e){e.shiftKey?this.focusPrevious():this.focusNext(),e.preventDefault()},13:function(e){e.preventDefault(),this.container.find("a.focused").trigger("click")}},n.prototype.search=function(e){var e=this.query();if(e==="")this.update([]),this.hide();else{var t=this.searchSources(e);t.length!==0?(this.options.limit!==!1&&(t=t.splice(0,this.options.limit)),this.update(t),this.container.is(":hidden")&&this.show()):this.options.onNoResults.call(this)}},n.prototype.searchSources=function(t){var n=this,r=[],i,s;i=t.replace(/\s+/," ").split(" ");if(i.length>1)for(var o=0,u=i.length;o<u;o++)r.push("(?=.*"+i[o]+")");else r.push(t);return s=new RegExp(r.join(""),"gi"),e.grep(this.source,function(e){return s.exec(e.name)!==null}).sort(function(e,t){return n.options.sortFunction.call(n,e,t)})},n.prototype.update=function(t){this.current_suggestions=t,this.focused=-1;var n=this,r=["<ul>"];e.each(this.current_suggestions,function(e,t){r.push(n.options.itemTemplate.call(n,t,n.query()))}),r.push("</ul>"),this.container.html(r.join(""))},n.prototype.show=function(){this.position(),this.container.show();var t=this;e(document).bind("click.autocomplete"+this._id,function(n){var r=t.container.get(0);n.target!==t.element.get(0)&&n.target!==r&&!e.contains(r,n.target)&&(t.hide(),t.element.blur())}),this.options.onShow.call(this)},n.prototype.hide=function(){this.container.hide(),e(document).unbind("click.autocomplete-"+this._id),this.options.onHide.call(this)},n.prototype.focusNext=function(){var e=this.current_suggestions.length;e>0&&this.focused<e-1?this.focusSuggestion(this.focused+1):this.focused===e-1&&this.focusSuggestion(0)},n.prototype.focusPrevious=function(){this.focused!==-1?this.focusSuggestion(this.focused-1):this.focusSuggestion(this.current_suggestions.length-1)},n.prototype.focusSuggestion=function(e){this.container.find("li").removeClass("focused").filter(":nth-child("+(e+1)+")").addClass("focused"),this.focused=e},n.prototype.position=function(){if(this.options.inlined)return;var e=this.element.offset();this.container.css({top:Math.round(e.top+this.offsets.y)+"px",left:Math.round(e.left+this.offsets.x)+"px"})},function(e,t){new n(e,t)}}(),t.NavigationToggler=function(t){var n=e(t),r=!1,i,s=function(e){var t=e.outerHeight(),n="#site-top-navigation { margin-top: -"+t+"px; }";return n+="#site-top-navigation.inactive { margin-top: -"+t+"px; }",n},o=function(){if(!r){f();return}var e=document.getElementById("navigation-styles");e.innerHTML=s(e)},u=function(e){e.preventDefault(),i.addClass("inactive").removeClass("active")},a=function(e){e.preventDefault(),i.css("visibility","visible"),i.addClass("active").removeClass("inactive")},f=function(){if(r)return;var t=e("#site-navigation");i=t.clone(),i.attr("id","site-top-navigation").css({visibility:"hidden"}),i.append('<a href="#" class="close"><span>St√§ng meny</span></a>'),i.find("a.close").bind("click",u),e("body").append(i);var n=document.createElement("style");n.id="navigation-styles",n.type="text/css",n.innerHTML=s(i),document.getElementsByTagName("head")[0].appendChild(n),r=!0};n.bind("click",a),e(document).bind("resize",function(){setTimeout(o,200)}),f()},t.focusAndCopy=function(t){var n=function(){var e=this;window.setTimeout(function(){e.select()},5)};e(t).bind("focus",n).bind("click",n)},t.placeholderFallback=function(){var t=function(t){var n=e(t),r=e.trim(n.val()),i=n.attr("placeholder");if(r!=="")return;n.addClass("placeholder").val(i)},n=function(t){var n=e(t),r=e.trim(n.val()),i=n.attr("placeholder");r===i&&n.val("").removeClass("placeholder")};e("input[placeholder], textarea[placeholder]").filter(function(){return e.trim(e(this).val())===""}).bind("focus.placeholder",function(){n(this)}).bind("blur.placeholder",function(){t(this)}).each(function(){t(this)})},t.columnsFallback=function(t,n){var r=e(t);if(r.size()===0)return;r.each(function(){var t=e(this),r=t.find("li"),i=r.size(),s=Math.ceil(i/n)-1,o=[],u=[];for(var a=0;a<n;a++)u.push(['<div class="column c'+n+'"><ul>']);var f=0,l=0;for(var a=0;a<i;a++)u[l].push(r[a].outerHTML),f!==s?f++:(f=0,l++);for(var a=0;a<n;a++)u[a].push("</ul></div>"),u[a]=u[a].join("");o.push('<div class="grid"><div class="container">'),o.push(u.join("")),o.push("</div></div>"),t.replaceWith(o.join(""))})},t.SideNavigationToggler=function(){var t=e("#secondary-navigation"),n=(t.data("limit")||3)-1,r=t.data("show-more-copy"),i=t.data("show-less-copy"),s=!1,o=function(){return t.find("li:gt("+n+"):not(.more)")},u=function(){o().show(),t.find("li.more a").text(i),s=!1},a=function(){o().hide(),t.find("li.more a").text(r),s=!0};t.find("ul.menu").append('<li class="leaf more"><a href="#site-navigation">'+r+"</a></li>"),t.delegate("li.more a","click",function(e){e.preventDefault(),s?u():a()}),a()},e(document).ready(function(){var n=e("html");n.hasClass("lte8")||t.NavigationToggler("#skip-to-navigation"),n.hasClass("lte9")&&(t.placeholderFallback(),t.columnsFallback("ol.labeled-list ol",3)),t.CookieChecker(),t.SideNavigationToggler(),t.searchAsYouType("#list-search",{source:function(){var t=this.element.data("target-list"),n=t?t+" a":"div.labeled-list-container a",r=e.map(e(n),function(t){return{name:e(t).text(),href:t.href}});this.source=r.sort(function(e,t){return e.name.localeCompare(t.name)})},onShow:function(){this.element.parent().addClass("active-suggestions")},onHide:function(){this.element.parent().removeClass("active-suggestions")}}),e("section.tabbed").tabs(),e("#conversation-form").hide(),e("#go-to-form").bind("click",function(t){t.preventDefault();var n=e("#conversation-form");n.is(":visible")?e("#conversation-form").slideUp():e("#conversation-form").slideDown()}),t.focusAndCopy("input.share")}),"Mp"in window||(window.Mp=t)})(jQuery);